<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://bateman.io/images/favicon.png" />
<title>Getting Started With GNUs | Sam Bateman&#39;s Personal Website</title>
<meta name="title" content="Getting Started With GNUs" />
<meta name="description" content="A simple introduction to using GNUs as a email client and RSS-newsfeed reader in Emacs" />
<meta name="keywords" content="gnus,emacs,email," />


<meta property="og:title" content="Getting Started With GNUs" />
<meta property="og:description" content="A simple introduction to using GNUs as a email client and RSS-newsfeed reader in Emacs" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bateman.io/post/getting-started-with-gnus/" />
<meta property="og:image" content="https://bateman.io/images/share.png"/>
<meta property="article:published_time" content="2018-10-29T23:39:13-06:00" />
<meta property="article:modified_time" content="2018-10-29T23:39:13-06:00" /><meta property="og:site_name" content="Sam Bateman&#39;s Personal Website" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://bateman.io/images/share.png"/>

<meta name="twitter:title" content="Getting Started With GNUs"/>
<meta name="twitter:description" content="A simple introduction to using GNUs as a email client and RSS-newsfeed reader in Emacs"/>



<meta itemprop="name" content="Getting Started With GNUs">
<meta itemprop="description" content="A simple introduction to using GNUs as a email client and RSS-newsfeed reader in Emacs">
<meta itemprop="datePublished" content="2018-10-29T23:39:13-06:00" />
<meta itemprop="dateModified" content="2018-10-29T23:39:13-06:00" />
<meta itemprop="wordCount" content="1581">
<meta itemprop="image" content="https://bateman.io/images/share.png"/>



<meta itemprop="keywords" content="gnus,emacs,email," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>
</head>

<body>
  <header><a href="/" class="title">
  <h2>Sam Bateman&#39;s Personal Website</h2>
</a>
<nav><a href="/">Home</a>

<a href="/cv.pdf">CV</a>

<a href="/post/">Blog</a>

<a href="/project/">Projects</a>


</nav>
<h2>Getting Started With GNUs</h2>
</header>
  <main>

<content>
  <p>Emacs is quite the beast. It really isn&rsquo;t an editor so much as a operating system, and a pretty good one. It brings the promise of lisp machines onto every modern operating system and makes it quite easy to build a fantastic experience across systems.</p>
<p>Obviously, one of the more integral functions of such an operating system is email, and here, Emacs is a embarassment of riches. There are many avalible email clients in Emacs. Having tried Wunderlust and a few others, I found they didn&rsquo;t have much advantages over using a normal client other than org-mode integration. However, there is one that stands out from the rest: GNUs.</p>
<p>Not only a competitent email client, GNUs provides a fantastic way to get through large RSS Feeds and mailing lists quickly, clearly designed by people who are ingesting a lot of information on the regular. It does this by providing a clean interface with almost no required user interation while providing some of the nice feature of a GUI. The simple nature of GNUs interface lets you quickly get through some of the more intense RSS feeds and mailing list. For example, now that I use GNUs, I simply skim all of the submissions to Hacker News right from the fire hse and it still takes less time than reading the first couple pages used to. But thats only one of the many improvements I have seen to productivity.</p>
<p>One of the benifits I didn&rsquo;t anticipate is that when one uses w3m to render your emails, every image-only marketing email doesn&rsquo;t take any of your attention and you only get the gist from every email of a similar, text friendly nature. This leaves only the important mail left to actually read and sort through, meaning you spend less time looking at worthless marketing information and more time doing something else!</p>
<p>Now here comes the hard part: GNUs configuration is documented in a very Emacs-y way. Many Emacs users much more versed than I will chuckle at that statement. What I mean is that the Emacs community is very intelligent but isn&rsquo;t super good at collessing information into one place and ensuring that information stays alive. This means some of the better resources are now just 404 responses and what is left is wiki articles with a ton of broken links. When I started learning Emacs, I was afraid it was because the community was dying. But what I have found since is that Emacs has never been doing better than now, but that most people either use a prepackaged set of extensions and configurations or are very tinkery and build whatever they can&rsquo;t have out of the box. This means that most of the documentation is right in the code and there aren&rsquo;t a lot of clear examples outside of random .emacs files on github that say &ldquo;warning I don&rsquo;t know if this actually works.&rdquo;</p>
<p>However, after sifting through a ton of crap, I have built a fairly effective GNUs configuration for my usage. With that said, email is different for everyone and I don&rsquo;t promise to have the one-true-config for GNUs that will be everything for everyone.</p>
<p>The first thing I have learned, is that nnimap in GNUs is terrible. From what I have gathered myself, I think its a pretty bad idea to try and use it. It makes everything very slow to start and isn&rsquo;t what elisp is good for. But, there are tools that work with GNUs that are very good that for talking to IMAP servers. The one I decided on is mbsync (used to be known as isync). mbsync provides good support for IMAP and gmail specfic IMAP. It isn&rsquo;t perfect, but it is the fastest maildir compatible IMAP client and is also pretty reliable (something that I didn&rsquo;t fully appreciate as a nessesary feature during my short stint with the bug ridden offlineimap).</p>
<p>Getting mbsync is non-obvious but simple on debian. One just installs isync and this installs mbsync and a legacy wrapper for it to act as isync. From there, you will want to download your email. This isn&rsquo;t instantanious but only took me 45 minutes or so with 50,000 emails but YMMV. Your primary hold up will likely be that Googles IMAP servers get upset if you make too many requests too quickly and will stop giving you data for a period of time. This doesn&rsquo;t happen regularly, but did happen to me multiple times when setting up my accounts. A good starting .mbsyncrc (living in your $HOME directory) is as follows:</p>
<pre><code># Not gmail account
IMAPAccount personal
Host imap.not-google.com
user &lt;USERNAME&gt;
pass &lt;PASSWORD&gt;
PipelineDepth 50

IMAPStore personal-remote
Account personal

MaildirStore personal-local
Path ~/.mail/personal
Inbox ~/.mail/personal/Inbox
SubFolders Verbatim

Channel personal
Master :personal-remote:
Slave :personal-local:
Patterns &quot;INBOX&quot; &quot;Other&quot; &quot;Drafts&quot;
Create Both
SyncState *

# Gmail Account
IMAPAccount gmail
Host imap.gmail.com
user &lt;USERNAME&gt;
pass &lt;PASSWORD&gt;
SSLType IMAPS
CertificateFile ~/.cert/imap.gmail.com.pem
AuthMechs LOGIN
PipelineDepth 50

IMAPStore gmail-remote
Account gmail

MaildirStore gmail-local
Path ~/.mail/gmail
Inbox ~/.mail/gmail/Inbox
SubFolders Verbatim

Channel gmail
Master :gmail-remote:
Slave :gmail-local:
Patterns *
Create Both
SyncState *

# More accounts ....
</code></pre><p>However, if you choose to use this as a long-term solution I recommend getting mbsync to get your password out of a .gpg (or a custom commandline password manager, which, btw, is probably better for ease of use), which it supports pretty simply. Just replace the pass line for each email with:</p>
<pre><code>PassCmd &quot;gpg2 -q --for-your-eyes-only --no-tty -d ~/.mailpass.gpg&quot;
</code></pre><p>Be sure to direct it to the proper file for each password. I haven&rsquo;t figured out yet how to put them all into a single .authinfo.gpg yet though, so if you find that out, please email me!</p>
<p>From here, you should just be able to run:</p>
<pre><code>mbsync -a
</code></pre><p>This should download all your mail from each account. You probably want to set up a recurring task with systemd to run this every 5 minutes or so. There is a great Arch Wiki page <a href="https://wiki.archlinux.org/index.php/isync#Automatic_synchronization">here</a> describing it</p>
<p>From here, we have our mail (or atleast most of it) local on our machine. Now we can start getting into the nitty gritty of reading it from GNUs. Like all great *nix utilities, it requires its own config file in your $HOME directory called .gnus.el.</p>
<p>Because of the simplicity of how we set up our maildirs, the configuration isn&rsquo;t too bad. To get GNUs reading our email, all we need in our .gnus.el file is the following:</p>
<pre><code>(setq user-mail-address    &quot;example@not-google.com&quot;
      user-full-name       &quot;Your Name&quot;)

(setq gnus-select-method '(nnnil &quot;&quot;))
(setq gnus-secondary-select-methods
      '((nntp &quot;news.gwene.org&quot;)
        (nnmaildir &quot;personal&quot;
		   (directory &quot;~/.mail/personal/&quot;))
	(nnmaildir &quot;gmail&quot;
		   (directory &quot;~/.mail/gmail/&quot;))
	))

(setq send-mail-function 'smtpmail-send-it)
(setq smtpmail-smtp-server &quot;smtp.not-google.com&quot;)
(setq smtpmail-smtp-service 587)


(setq mm-text-html-renderer 'gnus-w3m)
(setq gnus-inhibit-images nil)
</code></pre><p>You can see that all we are doing is pointing GNUs to those folders and telling them they are maildirs. There is a certain beauty in the fact that there is a expert tool doing its job and all your mail client has to do is focus on providing email for you.</p>
<p>You can add as many emails as you would like by the way to this set up, I personally have added 6 and they all work fine.</p>
<p>Now that we have this file, we can run M-x gnus in Emacs and after a short loading period, it should come up with your email boxes as you have configured them!</p>
<p>Now that that is all in order, you should be able to read your email in a simplistic fashion in gnus with org-mode links. Go to the first mailbox with unread mail, hit enter twice and then read that email and hit n to see the next email. If you reach the end of a mailbox, just hit n again and you will be taken to the next mailbox.</p>
<p>This is awesome and fast, which is everything we wanted from email in emacs. What alludes to the power of GNUs is that this is the most basic getting started configuration, we can do better.</p>
<p>One thing that I am personally stumped with is setting up is a mythical notmuch search functionality. Many have spoke of it on mailing-lists but the primary source config is a 404 these days unfortunately. With that said, I have found <a href="https://gist.github.com/lchausmann/9483876">this gist</a> which has fantastic information but requires that All Mail be downloaded to work with Gmail which I have yet to figure out. Again, if you find anything, feel free to email me!</p>
<p>From here, you probably want to add some RSS feeds. I like <a href="http://gwene.org/">http://gwene.org/</a> for this task. We already set it up as as newsgroup provider when we setup our email, so all you need to do is open emacs (which lands you at what is called the Groups page) and from the Groups page, press ^. You should be given a list of newsgroups/RSS feeds provided by Gwene. To check if a RSS feed is provided by them, go to their website and try and add it. If it is already added, they will give you the name of the newsgroup, which you can just search the group list server buffer (the one we opened with ^) for it and hit u when your cursor is on that line to subscribe to it. In addition, you can type U to bring up a prompt so you don&rsquo;t have to search the buffer for said group.</p>
<p>From here, you should have a pretty slick, org-compatible setup that gets you through your email! If you have any questions or ideas, just email me at sam[at]bateman[dot]io!</p>

</content>
<p>
  
  <a href="https://bateman.io/blog/emacs/">#emacs</a>
  
  <a href="https://bateman.io/blog/email/">#email</a>
  
  <a href="https://bateman.io/blog/gnus/">#gnus</a>
  
</p>

  </main>
  <footer>
</footer>

    
</body>

</html>
